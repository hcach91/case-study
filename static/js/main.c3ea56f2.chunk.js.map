{"version":3,"sources":["components/Table/index.module.scss","components/Counter/index.tsx","components/Table/constant.ts","components/Table/index.tsx","components/App/index.tsx","reportWebVitals.ts","index.tsx"],"names":["module","exports","Counter","useState","counter","setCounter","className","onClick","ENDPOINT","Table","useForm","register","handleSubmit","reset","errors","formState","cl","useRef","AbortController","currentPage","setCurrentPage","totalPage","setTotalPage","employees","setEmployees","allowCreate","showCreatedForm","status","setStatusCreate","controller","current","signal","notAborted","aborted","activeFirst","activeLast","totalItem","length","maxEachPage","fromIndex","toIndex","setStatus","setTimeout","undefined","updateEmployee","Math","ceil","useEffect","fetch","then","res","ok","json","catch","console","log","abort","classes","table","slice","map","id","name","email","position","colSpan","new","pagination","disabled","htmlFor","required","message","type","pattern","value","result","method","headers","body","JSON","stringify","newEmployee","App","basename","to","exact","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c3ea56f2.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"Table_table__Z7VjQ\",\"new\":\"Table_new__2J3nl\",\"pagination\":\"Table_pagination__3Sg2v\"};","import React, { useState } from \"react\";\n\nexport function Counter() {\n  const [counter, setCounter] = useState<number>(0);\n  return (\n    <div className=\"p-3\">\n      <p>Counter: {counter}</p>\n      <button className=\"btn btn-primary mr-2\" onClick={() => setCounter(counter + 1)}>Increase (+1)</button>\n      <button className=\"btn btn-warning\" onClick={() => setCounter(0)}>Reset</button>\n    </div>\n  );\n}\n","export const ENDPOINT =\n  \"https://60c4be23ec8ef800175e0733.mockapi.io/case-study/employees\";\n\nexport const PAGE_SIZE = 5;\n","import { useEffect, useRef, useState } from \"react\";\nimport {\n  ChevronLeft,\n  ChevronRight,\n  ChevronDoubleLeft,\n  ChevronDoubleRight,\n  TextLeft,\n} from \"react-bootstrap-icons\";\nimport { useForm } from \"react-hook-form\";\n\nimport { PAGE_SIZE, ENDPOINT } from \"./constant\";\nimport classes from \"./index.module.scss\";\nimport { TableModal } from \"./modal\";\n\nexport function Table() {\n  const {\n    register,\n    handleSubmit,\n    reset,\n    formState: { errors },\n  } = useForm<TableModal.Form>();\n\n  const cl = useRef<AbortController>(new AbortController());\n  const [currentPage, setCurrentPage] = useState<number>(1);\n  const [totalPage, setTotalPage] = useState<number>(0);\n  const [employees, setEmployees] = useState<TableModal.Employee[]>([]);\n\n  const [allowCreate, showCreatedForm] = useState<boolean>(false);\n  const [status, setStatusCreate] = useState<TableModal.Status>();\n\n  const controller = cl.current;\n  const signal = controller.signal;\n  const notAborted = !signal.aborted;\n\n  const activeFirst = currentPage !== 1;\n  const activeLast = currentPage !== totalPage;\n\n  const totalItem = employees.length;\n  const rawMaxEachPage = currentPage * PAGE_SIZE;\n  const maxEachPage = !activeLast ? totalItem : rawMaxEachPage;\n\n  const fromIndex = (currentPage - 1) * PAGE_SIZE;\n  const toIndex = fromIndex + PAGE_SIZE;\n\n  useEffect(() => {\n    fetch(ENDPOINT, { signal })\n      .then((res) => (res.ok ? res.json() : []))\n      .then((employees: TableModal.Employee[]) => {\n        updateEmployee(employees);\n      })\n      .catch(() => console.log(\"Fetch employee fail\"));\n    return () => controller.abort();\n  }, []);\n\n  function setStatus(status: TableModal.Status) {\n    setStatusCreate(status);\n    setTimeout(() => notAborted && setStatusCreate(undefined), 5000);\n  }\n\n  function updateEmployee(employees: TableModal.Employee[]) {\n    setEmployees(employees);\n    setTotalPage(Math.ceil(employees.length / PAGE_SIZE));\n  }\n\n  function onSubmit(result: TableModal.Form) {\n    setStatus(\"fetching\");\n    fetch(ENDPOINT, {\n      signal,\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(result),\n    })\n      .then((res) => res.json())\n      .then((newEmployee: TableModal.Employee) => {\n        if (notAborted) {\n          showCreatedForm(false);\n          updateEmployee([...employees, newEmployee]);\n          reset();\n          setStatus(\"success\");\n        }\n      })\n      .catch(() => notAborted && setStatus(\"fail\"));\n  }\n\n  return (\n    <div className=\"p-3\">\n      <h2>Employees</h2>\n      <table className={classes.table}>\n        <thead>\n          <tr>\n            <th>Name</th>\n            <th>@ Email</th>\n            <th>\n              <TextLeft /> Position\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          {employees\n            .slice(fromIndex, toIndex)\n            .map(({ id, name, email, position }) => (\n              <tr key={id}>\n                <td>{name}</td>\n                <td>{email}</td>\n                <td>{position}</td>\n              </tr>\n            ))}\n          {!employees.length && (\n            <tr>\n              <td className=\"text-center\" colSpan={3}>\n                No data\n              </td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n      <div className={classes.new} onClick={() => showCreatedForm(true)}>\n        + New\n      </div>\n      <div className={classes.pagination}>\n        <p className=\"m-0\">\n          {currentPage * PAGE_SIZE - PAGE_SIZE + 1} - {maxEachPage} of{\" \"}\n          {totalItem}\n        </p>\n        <button\n          className=\"btn first\"\n          onClick={() => setCurrentPage(1)}\n          disabled={!activeFirst}\n        >\n          <ChevronDoubleLeft />\n        </button>\n        <button\n          className=\"btn prev\"\n          onClick={() => setCurrentPage(currentPage - 1)}\n          disabled={!activeFirst}\n        >\n          <ChevronLeft />\n        </button>\n        <button\n          className=\"btn next\"\n          onClick={() => setCurrentPage(currentPage + 1)}\n          disabled={!activeLast}\n        >\n          <ChevronRight />\n        </button>\n        <button\n          className=\"btn last\"\n          onClick={() => setCurrentPage(totalPage)}\n          disabled={!activeLast}\n        >\n          <ChevronDoubleRight />\n        </button>\n      </div>\n      {allowCreate && (\n        <form className=\"form\">\n          <div className=\"form-group\">\n            <label htmlFor=\"name\">Name*</label>\n            <input\n              className=\"form-control\"\n              id=\"name\"\n              {...register(\"name\", { required: \"Please input name\" })}\n            />\n            {errors.name && (\n              <small className=\"form-text text-danger\">\n                {errors.name.message}\n              </small>\n            )}\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"email\">Email*</label>\n            <input\n              type=\"email\"\n              className=\"form-control\"\n              id=\"email\"\n              {...register(\"email\", {\n                required: \"Please input email\",\n                pattern: {\n                  value: /^\\w+@\\w+\\.\\w{2,4}$/i,\n                  message: \"Email not valid\",\n                },\n              })}\n            />\n            {errors.email && (\n              <small className=\"form-text text-danger\">\n                {errors.email.message}\n              </small>\n            )}\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"position\">Position*</label>\n            <input\n              className=\"form-control\"\n              id=\"position\"\n              {...register(\"position\", { required: \"Please input position\" })}\n            />\n            {errors.position && (\n              <small className=\"form-text text-danger\">\n                {errors.position.message}\n              </small>\n            )}\n          </div>\n          <div className=\"d-flex justify-content-center mb-3\">\n            <button\n              className=\"btn btn-primary\"\n              onClick={handleSubmit(onSubmit)}\n              disabled={status === \"fetching\"}\n            >\n              Create\n            </button>\n          </div>\n        </form>\n      )}\n      {status === \"success\" && (\n        <p className=\"alert alert-success text-center m-auto w-25 mb-3\">\n          Created sucessful!\n        </p>\n      )}\n      {status === \"fail\" && (\n        <p className=\"alert alert-danger text-center m-auto w-25\">\n          Created fail!\n        </p>\n      )}\n    </div>\n  );\n}\n","import { BrowserRouter, Switch, Route, Link, Redirect } from \"react-router-dom\";\nimport { Counter, Table } from \"..\";\n\nexport function App() {\n  return (\n    <BrowserRouter basename=\"/case-study\">\n      <nav>\n        <ul>\n          <li>\n            <Link to=\"counter\">Counter</Link>\n          </li>\n          <li>\n            <Link to=\"/table\">Table</Link>\n          </li>\n        </ul>\n      </nav>\n      <Switch>\n        <Route exact path=\"/\">\n          <Redirect to=\"/counter\" />\n        </Route>\n        <Route path=\"/counter\">\n          <Counter />\n        </Route>\n        <Route path=\"/table\">\n          <Table />\n        </Route>\n      </Switch>\n    </BrowserRouter>\n  );\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { App } from \"./components/App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}